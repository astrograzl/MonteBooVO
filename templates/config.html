{% from 'macro.j2' import field %}
{% extends 'basic.html' %}

{% block head %}
<h2>Configuration</h2>
{% endblock head %}

{% block content %}

<form method="POST" enctype="multipart/form-data">
<div class="row">
  <div class="col-sm-8 col-sm-offset-2 form-group">
    <div class="input-group">
      <span class="input-group-addon">
        <label for="file">Load configuration from file</label>
      </span>
      <input type="file" name="file" id="file"
             accept="application/json" class="form-control">
      <span class="input-group-btn">
        <button type="submit" class="btn btn-primary">Apply</button>
        <a href="/config/export" class="btn btn-info">Export</a>
      </span>
    </div>
  </div>
</div>
</form>

<form method="POST">

{% for item in default %}

  {% if (loop.index % 2 == 1
     and loop.index not in [23, 25])
     or loop.index == 24 %}
  <div class="row">
  {% endif %}

  {% if loop.index in [21, 22, 23] %}
    {{ field(item, label=default[item]['label'],
                   value=form[item],
                   place=default[item]['place'],
                   text=default[item]['text'], cols=4) }}
  {% else %}
    {{ field(item, label=default[item]['label'],
                   value=form[item],
                   place=default[item]['place'],
                   text=default[item]['text'], cols=6) }}
  {% endif %}

  {% if (loop.index % 2 == 0
     and loop.index not in [22, 24])
     or loop.index in [23, 25] %}
  </div>
  {% endif %}

{% endfor %}

<div class="row form-group">
  <div class="col-sm-6 text-right">
    <a href="/config/reset" class="btn btn-danger">
      <span class="glyphicon glyphicon-remove"></span>&nbsp;Reset
    </a>
  </div>
  <div class="col-sm-6 text-left">
    <button type="submit" class="btn btn-success">
      <span class="glyphicon glyphicon-ok"></span>&nbsp;Save
    </button>
  </div>
</div>

</form>

{% endblock content %}
